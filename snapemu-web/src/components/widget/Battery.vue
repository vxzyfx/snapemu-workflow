<template>
  <div>
    <div v-if="noBattery">
      N/A
    </div>
    <div v-else class="electric-panel" :class="bgClass">
      {{props.battery}}%
      <div class="panel">
        <div class="remainder" :style="{width: props.battery +'%'}" />
      </div>
      <svg v-if="charge" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="none" version="1.1" width="18.196111791731255" height="23.035173022836716" viewBox="0 0 18.196111791731255 23.035173022836716">
        <g transform="matrix(0.9170700907707214,0.39872607588768005,-0.39872607588768005,0.9170700907707214,0.9562381981363277,-3.281786115628378)">
          <path d="M18.02440280069484,8.335708083329202L16.13627280069484,8.335708083329202C15.73106280069484,8.335708083329202,14.58439280069484,8.5657080833292,14.19642280069484,8.285708083329201C14.11883280069484,7.965708083329201,14.368852800694839,7.385708083329201,14.437832800694839,7.1057080833292C14.636122800694839,6.295708083329201,14.82580280069484,5.495708083329201,15.02409280069484,4.675708083329201L15.86901280069484,1.1457070833292007C15.981092800694839,0.6857072833292007,15.46379280069484,0.48570708332920076,15.24825280069484,0.8357070833292007L8.41997560069484,11.705698083329201C8.26478780069484,11.955698083329201,8.48032680069484,12.305698083329201,8.72173080069484,12.305698083329201L11.489252800694839,12.305698083329201C11.67892280069484,12.305698083329201,12.41176280069484,12.1656980833292,12.53246280069484,12.375698083329201C12.64454280069484,12.545698083329201,12.429002800694839,13.0756980833292,12.38589280069484,13.2656980833292C11.86860280069484,15.3456980833292,11.36855280069484,17.425698083329202,10.86850280069484,19.5056980833292C10.756422800694839,19.9656980833292,11.27371280069484,20.1656980833292,11.489252800694839,19.815698083329202L18.30891280069484,8.945708083329201C18.47271280069484,8.685708083329201,18.26580280069484,8.335708083329202,18.02440280069484,8.335708083329202Z" fill="currentColor" fill-opacity="1"/>
          <path d="M18.73191280069484,9.2122380833292L18.73241280069484,9.211428083329201Q19.002512800694838,8.7819680833292,18.76371280069484,8.3153680833292Q18.51811280069484,7.835708083329201,18.02440280069484,7.835708083329201L16.13627280069484,7.835708083329201Q16.00428280069484,7.835708083329201,15.638502800694841,7.872628083329201Q15.006152800694839,7.9364580833292,14.71584280069484,7.923918083329201Q14.75431280069484,7.7692080833292,14.833322800694841,7.5248380833292Q14.90136280069484,7.314428083329201,14.92331280069484,7.225298083329201L15.131612800694839,6.3667580833292L15.51023280069484,4.792638083329201L16.35527280069484,1.2620960833292008Q16.43606280069484,0.9305480833292008,16.30333280069484,0.6438977833292008Q16.17117280069484,0.35849208332920074,15.88596280069484,0.23067908332920073Q15.60295280069484,0.10385108332920079,15.30733280069484,0.19317008332920077Q14.99946280069484,0.28619008332920076,14.82251280069484,0.5735232833292008L7.99658180069484,11.439698083329201Q7.72862480069484,11.8713980833292,7.9830108006948395,12.3385980833292Q8.23737780069484,12.805698083329201,8.72172980069484,12.805698083329201L11.489252800694839,12.805698083329201Q11.557762800694839,12.805698083329201,11.74008280069484,12.787198083329201Q11.90041280069484,12.7708980833292,12.01212280069484,12.764398083329201Q11.99117280069484,12.8384980833292,11.96130280069484,12.9347980833292Q11.91279280069484,13.0911980833292,11.89829280069484,13.1550980833292L10.38304280069484,19.385998083329202L10.382362800694839,19.3887980833292Q10.30145280069484,19.7208980833292,10.43418280069484,20.0074980833292Q10.56633280069484,20.292898083329202,10.85154280069484,20.4206980833292Q11.13455280069484,20.547598083329202,11.43018280069484,20.4581980833292Q11.73805280069484,20.3651980833292,11.91500280069484,20.077898083329202L18.73191280069484,9.2122380833292ZM17.78767280069484,8.8357080833292L16.13627280069484,8.8357080833292Q16.05462280069484,8.8357080833292,15.73893280069484,8.8675680833292Q14.34345280069484,9.008438083329201,13.90381280069484,8.691148083329201L13.75403280069484,8.583048083329201L13.71050280069484,8.4035380833292Q13.61953280069484,8.028368083329202,13.88183280069484,7.2171680833292005Q13.93890280069484,7.040658083329201,13.95234280069484,6.986118083329201L14.159802800694841,6.130988083329201L14.537962800694839,4.558778083329201L15.17693280069484,1.8891880833292007L8.94762480069484,11.805698083329201L11.489252800694839,11.805698083329201Q11.50705280069484,11.805698083329201,11.63891280069484,11.7922980833292Q12.004732800694839,11.755098083329202,12.20034280069484,11.7609980833292Q12.76568280069484,11.778098083329201,12.96596280069484,12.126498083329201L12.965922800694841,12.1265980833292Q13.15599280069484,12.458898083329201,12.91639280069484,13.2310980833292Q12.879402800694841,13.3502980833292,12.87350280069484,13.376298083329202L11.56632280069484,18.7520980833292L17.78767280069484,8.8357080833292Z" fill-rule="evenodd" fill="#FFFFFF" fill-opacity="1"/>
        </g>
      </svg>
    </div>
  </div>
</template>

<script setup lang="ts">

import { computed } from 'vue'
import { isUndefined } from 'lodash-es'

const props = defineProps<{
  battery?: number,
  charge?: boolean
}>();

const noBattery = computed(() => isUndefined(props.battery));
const charge = computed(() => !isUndefined(props.charge) && props.charge);

const bgClass =  computed(() => {
  if (props.battery) {
    if (props.battery >= 30) {
      return 'success'
    } else if (props.battery >= 15) {
      return 'warning'
    } else if (props.battery >= 1) {
      return 'danger'
    } else {
      return 'danger'
    }
  }
  return 'danger'
})
</script>

<style lang="scss" scoped>
$color-primary: #447ced;
$color-success: #13ce66;
$color-warning: #ffba00;
$color-danger: #ff4949;
$color-info: #909399;
$color-white: #fff;

@mixin panel($color) {
  .panel {
    border-color: #{$color};
    &:before {
      background: #{$color};
    }
    .remainder {
      background: #{$color};
    }
  }
  svg {
    color: #{$color};
  }
  .text {
    color: #{$color};
  }
}
.electric-panel {
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;

  .panel {
    box-sizing: border-box;
    width: 30px;
    height: 14px;
    position: relative;
    border: 2px solid #ccc;
    padding: 1px;
    border-radius: 3px;

    &::before {
      content: '';
      border-radius: 0 1px 1px 0;
      height: 6px;
      background: #ccc;
      width: 4px;
      position: absolute;
      top: 50%;
      right: -4px;
      transform: translateY(-50%);
    }

    .remainder {
      border-radius: 1px;
      position: relative;
      height: 100%;
      width: 0;
      left: 0;
      top: 0;
      background: #fff;
    }
  }
  svg {
    position: absolute;
  }
  .text {
    text-align: left;
    width: 42px;
  }

  &.success {
    @include panel($color-success);
  }

  &.warning {
    @include panel($color-warning);
  }

  &.danger {
    @include panel($color-danger);
  }
}
</style>

